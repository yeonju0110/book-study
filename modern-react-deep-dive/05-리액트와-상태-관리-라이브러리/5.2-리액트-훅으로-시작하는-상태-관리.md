# ğŸ•µï¸ ë¦¬ì•¡íŠ¸ í›…ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

## ğŸ“ ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•: useStateì™€ useReducer

### âœï¸ useState

- ì§€ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í›…

```tsx
// í›… ì œì‘
function useCounter(initCount: number = 0) {
  const [counter, setCounter] = useState(initCount);

  function inc() {
    setCounter((prev) => prev + 1);
  }

  return { counter, inc };
}

// ì‚¬ìš©
function Counter() {
  const { counter, inc } = useCounter();

  return (
    <>
      <h3>Counter1: {counter}</h3>
      <button onClick={inc}>+</button>
    </>
  );
}
```

### âœï¸ useReducer

- useStateì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì§€ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í›…

#### ğŸ‘€ useStateë¥¼ useReducerë¡œ êµ¬í˜„í•´ë³´ì

```tsx
type Initializer<T> = T extends any ? T | ((prev: T) => T) : never;

function reducer<T>(prev: T, action: Initializer<T>) {
  return typeof action === "function" ? action(prev) : action;
}

function useStateWithUseReducer<T>(initialState: T) {
  const [state, dispatch] = useReducer(reducer, initialState);

  return [state, dispatch];
}

export default useStateWithUseReducer;
```

#### ğŸ‘€ useReducerë¥¼ useStateë¡œ êµ¬í˜„í•´ë³´ì

```jsx
// useReducerë¥¼ TSë¡œ ì‘ì„±í•˜ë ¤ë©´ ë‹¤ì–‘í•œ í˜•íƒœì˜ ì˜¤ë²„ë¡œë”© í•„ìš” -> JSë¡œ ëŒ€ëµ ì‘ì„±
function useReducerWithUseState(reducer, initialState, initializer) {
  const [state, setState] = useState(
    initializer ? () => initializer(initialState) : initialState
  );

  const dispatch = useCallback(
    (action) => setState((prev) => reducer(prev, action)),
    [reducer]
  );

  return [state, dispatch];
}
```

### ğŸ¤” useStateì™€ useReducerì˜ í•œê³„

- í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œë§Œ ìœ íš¨í•¨

### ğŸ¤” ë‘ ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ counter ìƒíƒœë¥¼ ë°”ë¼ë³´ë ¤ë©´?

- ìƒíƒœë¥¼ ì»´í¬ë„ŒíŠ¸ ë°–ìœ¼ë¡œ í•œ ë‹¨ê³„ ëŒì–´ ì˜¬ë¦¬ëŠ” ë°©ë²• ì¡´ì¬

```tsx
function Counter1({ counter, inc }: { counter: number; inc: () => void }) {
  return (
    <>
      <h3>Counter1: {counter}</h3>
      <button onClick={inc}>+</button>
    </>
  );
}

function Counter2({ counter, inc }: { counter: number; inc: () => void }) {
  return (
    <>
      <h3>Counter2: {counter}</h3>
      <button onClick={inc}>+</button>
    </>
  );
}

function Parent() {
  const { counter, inc } = useCounter();

  return (
    <>
      <Counter1 counter={counter} inc={inc} />
      <Counter2 counter={counter} inc={inc} />
    </>
  );
}
```

- ì¥ì 
  - ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ ìƒíƒœë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¨
- ë‹¨ì 
  - props í˜•íƒœë¡œ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì— ì œê³µí•´ì•¼ í•œë‹¤ëŠ” ì 

### ğŸ’¡ ê·¸ëŸ¬ë‚˜,,

- ë‘ í›…ì€ ë§Œë“¤ê¸°ì— ë”°ë¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì§€ì—­ ìƒíƒœë¥¼ ë§Œë“¤ì–´ ì£¼ì§€ë§Œ
- ì§€ì—­ ìƒíƒœë¼ëŠ” í•œê³„ ë•Œë¬¸ì— ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì— ê±¸ì³ ê³µìœ í•˜ê¸° ìœ„í•´ì„œëŠ” ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ë¥¼ ì¬ì„¤ê³„í•˜ëŠ” ë“±ì˜ ìˆ˜ê³ ë¡œì›€ì´ í•„ìš”í•¨

## ğŸ“ ì§€ì—­ ìƒíƒœì˜ í•œê³„ë¥¼ ë²—ì–´ë‚˜ë³´ì: useStateì˜ ìƒíƒœë¥¼ ë°”ê¹¥ìœ¼ë¡œ ë¶„ë¦¬í•˜ê¸°

- í˜„ì¬ ë¦¬ì•¡íŠ¸ì˜ useStateëŠ” ë¦¬ì•¡íŠ¸ê°€ ë§Œë“  í´ë¡œì € ë‚´ë¶€ì—ì„œ ê´€ë¦¬ë˜ì–´ ì§€ì—­ ìƒíƒœë¡œ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆìŒ

### ğŸ¤” ë§Œì•½ useStateê°€ ë¦¬ì•¡íŠ¸ í´ë¡œì €ê°€ ì•„ë‹Œ ì™„ì „íˆ ë‹¤ë¥¸ ê³³ì—ì„œ ì´ˆê¸°í™”ë¼ì„œ ê´€ë¦¬ë˜ë©´ ì–´ë–¨ê¹Œ?

```ts
// counter.ts
export type State = { counter: number };

// ìƒíƒœë¥¼ ì•„ì˜ˆ ì»´í¬ë„ŒíŠ¸ ë°–ì— ì„ ì–¸
let state: State = {
  counter: 0,
};

// getter
export function get(): State {
  return state;
}

// useStateì™€ ë™ì¼í•˜ê²Œ ê²Œìœ¼ë¥¸ ì´ˆê¸°í™” í•¨ìˆ˜ë‚˜ ê°’ì„ ë°›ì„ ìˆ˜ ìˆìŒ
type Initializer<T> = T extends any ? T | ((prev: T) => T) : never;

// setter
export function set<T>(nextState: Initializer<T>) {
  state = typeof nextState === "function" ? nextState(state) : nextState;
}

// Counter
function Counter() {
  const state = get();

  function handleClick() {
    set((prev: State) => ({ counter: prev.counter + 1 }));
  }

  return (
    <>
      <h3>{state.counter}</h3>
      <button onClick={handleClick}>+</button>
    </>
  );
}
```

- ì´ ë°©ì‹ì€ ë¦¬ì•¡íŠ¸ í™˜ê²½ì—ì„œ ì‘ë™í•˜ì§€ ì•ŠìŒ
- set, get ëª¨ë‘ ì˜ ì‘ë™í•˜ì§€ë§Œ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ì§€ ì•Šê¸° ë•Œë¬¸!
  - ë¦¬ì•¡íŠ¸ì˜ ë¦¬ë Œë”ë§ ë°©ì‹ì¸ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì˜ ì¬ì‹¤í–‰, useStateì˜ ë‘ ë²ˆì§¸ ì¸ìˆ˜ í˜¸ì¶œ ë“±ì— í¬í•¨ë˜ì§€ ì•Šê¸° ë•Œë¬¸
- ì¦‰, ì—…ë°ì´íŠ¸ëœ ê°’ì„ ê°€ì ¸ì˜¤ë ¤ë©´: ìƒíƒœ ì—…ë°ì´íŠ¸ + ë°˜ì˜í•˜ê¸° ìœ„í•œ ë¦¬ë Œë”ë§(â­ï¸) í•„ìš”

### ğŸ‘€ ê·¸ë ‡ë‹¤ë©´ useStateì˜ ì¸ìˆ˜ë¡œ ì»´í¬ë„ŒíŠ¸ ë°–ì—ì„œ ì„ ì–¸í•œ stateë¥¼ ë„˜ê²¨ì¤˜ë³´ì.

```tsx
function Counter1() {
  const [count, setCount] = useState(state);

  function handleClick() {
    // ì™¸ë¶€ì—ì„œ ì„ ì–¸í•œ set í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë‹¤ìŒ ìƒíƒœê°’ì„ ì—°ì‚°í•œ ë‹¤ìŒ,
    // ê·¸ ê°’ì„ ë¡œì»¬ ìƒíƒœê°’ì—ë„ ë„£ì—ˆë‹¤.
    set((prev: State) => {
      const newState = { counter: prev.counter + 1 };
      setCount(newState);
      return newState;
    });
  }

  return (
    <>
      <h3>{count.counter}</h3>
      <button onClick={handleClick}>+</button>
    </>
  );
}

function Counter2() {
  const [count, setCount] = useState(state);

  function handleClick() {
    // ìœ„ ì»´í¬ë„ŒíŠ¸ì™€ ë™ì¼í•œ ì‘ë™ ì¶”ê°€
    set((prev: State) => {
      const newState = { counter: prev.counter + 1 };
      setCount(newState);
      return newState;
    });
  }

  return (
    <>
      <h3>{count.counter}</h3>
      <button onClick={handleClick}>+</button>
    </>
  );
}
```

- í•´ë‹¹ ì½”ë“œëŠ”ìš”..
  - ì–µì§€ë¡œ ì „ì—­ì— ìˆëŠ” ìƒíƒœë¥¼ ì°¸ì¡°í•˜ê²Œ ë§Œë“  ì½”ë“œ
  - useStateì˜ ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì€ í•´ë‹¹ ì§€ì—­ ìƒíƒœì—ë§Œ ì˜í–¥ì„ ë¯¸ì¹˜ê¸°ì— ì™¸ë¶€ì— ì„ ì–¸í•œ setë„ ì‚¬ìš©
- ë¬¸ì œì 
  - ì™¸ë¶€ì— ìƒíƒœê°€ ìˆìŒì—ë„ ë Œë”ë§ì„ ìœ„í•´ useStateê°€ ì¡´ì¬
  - ë™ì‹œì— ë Œë”ë§ë˜ì§€ ì•Šê³  ë²„íŠ¼ ëˆ„ë¥¼ ë•Œ ê°ì ë Œë”ë§

### ğŸ’¡ ì¢…í•©í•´ë³´ì!

> í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ ìƒíƒœë¥¼ ì°¸ì¡°í•˜ê³  ë Œë”ë§ê¹Œì§€ ìì—°ìŠ¤ëŸ½ê²Œ ì¼ìœ¼í‚¤ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ë§Œì¡±í•  ê²ƒ.

1. ê¼­ windowë‚˜ globalì— ìˆì–´ì•¼ í•  í•„ìš”ëŠ” ì—†ì§€ë§Œ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ ì–´ë”˜ê°€ì— ìƒíƒœë¥¼ ë‘ê³  ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ê°™ì´ ì“¸ ìˆ˜ ìˆì–´ì•¼ í•¨
2. ì™¸ë¶€ì— ìˆëŠ” ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ìƒíƒœì˜ ë³€í™”ë¥¼ ì•Œì•„ì±Œ ìˆ˜ ìˆì–´ì•¼ í•¨ (ìƒíƒœë¥¼ ì°¸ì¡°í•˜ëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ ë™ì¼í•˜ê²Œ ì‘ë™í•´ì•¼ í•¨)
3. ìƒíƒœê°€ ê°ì²´ì¸ ê²½ìš° ê·¸ ê°ì²´ì— ë‚´ê°€ ê°ì§€í•˜ì§€ ì•ŠëŠ” ê°’ì´ ë³€í•œë‹¤ í•˜ë”ë¼ë„ ë¦¬ë Œë”ë§ì´ ë°œìƒí•´ì„œëŠ” ì•ˆ ë¨
   - ex. {a: 1, b: 2} // aë¥¼ 2ë¡œ ì—…ë°ì´íŠ¸í•˜ë©´ bë¥¼ ì°¸ì¡°í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ë¦¬ë Œë”ë§ ë°œìƒí•˜ë©´ ì•ˆ ë¨

### ğŸ‘€ ìœ„ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” storeì˜ ë¼ˆëŒ€ë¥¼ ë§Œë“¤ì–´ë³´ì.

- 2ë²ˆ ì¡°ê±´ ë§Œì¡±ì‹œí‚¤ê¸°: storeì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ë³€ê²½ëìŒì„ ì•Œë¦¬ëŠ” callbackí•¨ìˆ˜ ì‹¤í–‰í•´ì•¼ í•¨ + callbackì„ ë“±ë¡í•  ìˆ˜ ìˆëŠ” subscribe í•¨ìˆ˜ í•„ìš”

```tsx
type Initializer<T> = T extends any ? T | ((prev: T) => T) : never;

type Store<State> = {
  // í•­ìƒ ìµœì‹ ê°’ì„ ê°€ì ¸ì™€ì•¼ í•˜ë¯€ë¡œ í•¨ìˆ˜ë¡œ êµ¬í˜„.
  // ë³€ìˆ˜ ëŒ€ì‹  í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ë‘ë©´ í•­ìƒ ìƒˆë¡­ê²Œ ê°’ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì‹œë„í•  ê²ƒì´ë¯€ë¡œ ìµœì‹ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ
  get: () => State;
  // useStateì™€ ë™ì¼í•˜ê²Œ ê°’ ë˜ëŠ” í•¨ìˆ˜ë¡œ ë°›ì„ ìˆ˜ ìˆìŒ
  set: (action: Initializer<State>) => State;
  // ì´ storeì— ë³€ê²½ì„ ê°ì§€í•˜ê³  ì‹¶ì€ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìì‹ ì˜ callback í•¨ìˆ˜ë¥¼ ë“±ë¡í•´ ë‘ëŠ” ê³³
  subscribe: (callback: () => void) => () => void;
};

export const createStore = <State extends unknown>(
  initialState: Initializer<State>
): Store<State> => {
  // state ê°’ì€ store ë‚´ë¶€ì—ì„œ ë³´ê´€í•´ì•¼ í•˜ë¯€ë¡œ ë³€ìˆ˜ë¡œ ì„ ì–¸
  let state =
    typeof initialState !== "function" ? initialState : initialState();

  // ìë£Œí˜•ì— ê´€ê³„ì—†ì´ ìœ ì¼í•œ ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” Setì„ ì‚¬ìš©í•¨
  // Setì€ ì›ì‹œê°’ì´ë‚˜ ê°ì²´ì— ê´€ê³„ì—†ì´ ìœ ì¼í•œ ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆì–´ ì¤‘ë³µ ì—†ì´ ì½œë°± í•¨ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ìš©ë„ë¡œ ìœ ìš©í•¨
  const callbacks = new Set<() => void>();

  // ì–¸ì œë“  getì´ í˜¸ì¶œë˜ë©´ ìµœì‹ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•¨ìˆ˜ë¡œ ë§Œë“¬
  const get = () => state;
  const set = (nextState: State | ((prev: State) => State)) => {
    // ì¸ìˆ˜ê°€ í•¨ìˆ˜ë¼ë©´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ ìƒˆë¡œìš´ ê°’ì„ ë°›ê³ ,
    // ì•„ë‹ˆë¼ë©´ ìƒˆë¡œìš´ ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•¨
    state =
      typeof nextState === "function"
        ? (nextState as (prev: State) => State)(state)
        : nextState;

    // ê°’ì˜ ì„¤ì •ì´ ë°œìƒí•˜ë©´ ì½œë°± ëª©ë¡ì„ ìˆœíšŒí•˜ë©´ì„œ ëª¨ë“  ì½œë°±ì„ ì‹¤í–‰í•˜ì—¬ ë Œë”ë§ì„ ìœ ë„í•  ê²ƒ
    callbacks.forEach((callback) => callback());

    return state;
  };

  const subscribe = (callback: () => void) => {
    // ë°›ì€ í•¨ìˆ˜ë¥¼ ì½œë°± ëª©ë¡ì— ì¶”ê°€í•¨
    callbacks.add(callback);

    // í´ë¦°ì—… ì‹¤í–‰ ì‹œ ì´ë¥¼ ì‚­ì œí•´ì„œ ë°˜ë³µì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ê²ƒì„ ë§‰ìŒ
    return () => {
      callbacks.delete(callback);
    };
  };

  return { get, set, subscribe };
};
```

- ìš”ì•½
  - createStoreëŠ” ìì‹ ì´ ê´€ë¦¬í•´ì•¼ í•˜ëŠ” ìƒíƒœë¥¼ ë‚´ë¶€ ë³€ìˆ˜ë¡œ ê°€ì§
  - get í•¨ìˆ˜ë¡œ í•´ë‹¹ ë³€ìˆ˜ì˜ ìµœì‹ ê°’ì„ ì œê³µ
  - set í•¨ìˆ˜ë¡œ ë‚´ë¶€ ë³€ìˆ˜ë¥¼ ìµœì‹ í™”í•˜ë©°, ì´ ê³¼ì •ì—ì„œ ë“±ë¡ëœ ì½œë°±ì„ ëª¨ì¡°ë¦¬ ì‹¤í–‰í•˜ëŠ” êµ¬ì¡°ë¥¼ ë ê³  ìˆìŒ

### ğŸ‘€ hookì„ ë§Œë“¤ì–´ë³´ì.

```tsx
// storeì˜ ë³€í™”ë¥¼ ê°ì§€í•  ìˆ˜ ìˆëŠ” useStore hook
export const useStore = <State extends unknown>(store: Store<State>) => {
  // useStateê°€ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì„ ìœ ë„í•¨
  const [state, setState] = useState<State>(() => store.get());

  useEffect(() => {
    const unsubscribe = store.subscribe(() => {
      setState(store.get());
    });
    return unsubscribe; // callbackì´ ê³„ì†í•´ì„œ ìŒ“ì´ëŠ” í˜„ìƒ ë°©ì§€
  }, [store]); // store ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ stateê°’ì´ ë³€ê²½ë¨ì„ ë³´ì¥

  return [state, store.get] as const;
};
```

### ğŸ‘€ ì‚¬ìš©í•´ë³´ì.

```tsx
function Counter1() {
  const [state, setState] = useStore(store);

  function handleClick() {
    setState((prev) => ({ count: prev.count + 1 }));
  }

  return (
    <>
      <h3>Counter1: {state.count}</h3>
      <button onClick={handleClick}>+</button>
    </>
  );
}

function Counter2() {
  const [state, setState] = useStore(store);

  function handleClick() {
    setState((prev) => ({ count: prev.count + 1 }));
  }

  return (
    <>
      <h3>Counter1: {state.count}</h3>
      <button onClick={handleClick}>+</button>
    </>
  );
}

export default function App() {
  return (
    <div className="App">
      <Counter1 />
      <Counter2 />
    </div>
  );
}
```

## ğŸ“ useStateì™€ Contextë¥¼ ë™ì‹œì— ì‚¬ìš©í•´ ë³´ê¸°

- useStore, useStoreSelectorì˜ ë‹¨ì 
  - ì´ í›…ê³¼ ìŠ¤í† ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ìŠ¤í† ì–´ë§Œ ê°€ì§€ê²Œ ëœë‹¤ëŠ” ê²ƒ
  - í•˜ë‚˜ì˜ ìŠ¤í† ì–´ë¥¼ ê°€ì§€ë©´ ì´ ìŠ¤í† ì–´ëŠ” ë§ˆì¹˜ ì „ì—­ ë³€ìˆ˜ì²˜ëŸ¼ ì‘ë™í•˜ê²Œ ë˜ì–´ ë™ì¼í•œ í˜•íƒœì˜ ì—¬ëŸ¬ ê°œì˜ ìŠ¤í† ì–´ë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ê²Œ ë¨

### ğŸ¤” ë§Œì•½ í›…ì„ ì‚¬ìš©í•˜ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ì½”í”„ì—ì„œ ìŠ¤í† ì–´ì˜ êµ¬ì¡°ëŠ” ë™ì¼í•˜ë˜, ì—¬ëŸ¬ ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ê³µìœ í•´ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´?

ê°€ì¥ ë¨¼ì € ë– ì˜¤ë¥´ëŠ” ë°©ë²•: createStoreë¥¼ ì´ìš©í•´ ë™ì¼í•œ íƒ€ì…ìœ¼ë¡œ ìŠ¤í† ì–´ë¥¼ ì—¬ëŸ¬ ê°œ ë§Œë“œëŠ” ê²ƒ

- ë‹¨ì 
  - í•´ë‹¹ ìŠ¤í† ì–´ê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ ë°˜ë³µì ìœ¼ë¡œ ìŠ¤í† ì–´ë¥¼ ìƒì„±í•´ì•¼ í•¨
  - í›…ì€ ìŠ¤í† ì–´ì— ì˜ì¡´ì ì¸ 1:1 ê´€ê³„ë¥¼ ë§ºê³  ìˆìœ¼ë¯€ë¡œ ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ ë•Œë§ˆë‹¤ í•´ë‹¹ ìŠ¤í† ì–´ì— ì˜ì¡´ì ì¸ useStoreì™€ ê°™ì€ í›…ì„ ë™ì¼í•œ ê°œìˆ˜ë¡œ ìƒì„±í•´ì•¼ í•¨
  - ì´ í›…ì´ ì–´ëŠ ìŠ¤í† ì–´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œì§€ë¥¼ ê°€ëŠ í•˜ë ¤ë©´ ì˜¤ì§ í›…ì˜ ì´ë¦„ì´ë‚˜ ìŠ¤í† ì–´ì˜ ì´ë¦„ì— ì˜ì§€í•´ì•¼í•¨
- í•´ê²° ë°©ë²•
  - ë¦¬ì•¡íŠ¸ì˜ Context
    - Contextë¥¼ í™œìš©í•´ í•´ë‹¹ ìŠ¤í† ì–´ë¥¼ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì£¼ì…í•œë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ìì‹ ì´ ì£¼ì…ëœ ìŠ¤í† ì–´ì— ëŒ€í•´ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë  ê²ƒ

```tsx
// Contextë¥¼ ìƒì„±í•˜ë©´ ìë™ìœ¼ë¡œ ìŠ¤í† ì–´ë„ í•¨ê»˜ ìƒì„±
export const CounterStoreContext = createContext<Store<CounterStore>>(
  createStore<CounterStore>({ count: 0, text: "hello" })
);

export const CounterStoreProvider = ({
  initialState,
  children,
}: PropsWithChildren<{ initialState: CounterStore }>) => {
  // useRefë¥¼ ì‚¬ìš©í•œ ì´ìœ : Providerë¡œ ë„˜ê¸°ëŠ” propsê°€ ë¶ˆí¼ìš”í•˜ê²Œ ë³€ê²½ë¼ì„œ ë¦¬ë Œë”ë§ë˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ì„œì„
  //  useRefë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— CounterStoreProviderëŠ” ì˜¤ì§ ìµœì´ˆ ë Œë”ë§ì—ì„œë§Œ ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ì–´ì„œ ê°’ì„ ë‚´ë ¤ì¤Œ
  const storeRef = useRef<Store<CounterStore>>();

  //   ìŠ¤í† ì–´ë¥¼ ìƒì„±í•œ ì ì´ ì—†ë‹¤ë©´ ìµœì´ˆì— í•œ ë²ˆ ìƒì„±í•¨
  if (!storeRef.current) {
    storeRef.current = createStore(initialState);
  }

  return (
    <CounterStoreContext.Provider value={storeRef.current}>
      {children}
    </CounterStoreContext.Provider>
  );
};
```

```tsx
export const useCounterContextSelector = <State extends unknown>(
  selector: (state: CounterStore) => State
) => {
  const store = useContext(CounterStoreContext);

  const subscription = useSubscription(
    useMemo(
      () => ({
        getCurrentValue: () => selector(store.get()),
        subscribe: store.subscribe,
      }),
      [store, selector]
    )
  );

  return [subscription, store.set] as const;
};
```
